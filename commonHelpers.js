import{g as i,r as c,s as d,m as I}from"./assets/markupBuyLinks-c73dfa11.js";import{i as b,a as N}from"./assets/vendor-8cce9181.js";document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("scrollUpButton");window.addEventListener("scroll",function(){window.scrollY>100?t.style.display="block":t.style.display="none"}),t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});const k={titleColor:"#FFFFFF",messageColor:"#FFFFFF",messageSize:"20px",position:"topRight",displayMode:"replace",closeOnEscape:!0,pauseOnHover:!1,maxWidth:432,messageSize:"20px",messageLineHeight:"24px"};function f(t){b.show({message:t,backgroundColor:"#EF4040",progressBarColor:"#FFE0AC",...k})}function F(t){b.show({message:t,backgroundColor:"#3db919",progressBarColor:"#FFE0AC",...k})}const O="https://books-backend.p.goit.global",$=1e3*30,u=N.create({baseURL:O,timeout:$});function j(t){return f(t.message),null}u.interceptors.response.use(t=>t,j);function q(){return u.get("/books/category-list").then(t=>t.data)}function _(){return u.get("/books/top-books").then(t=>t.data)}function D(t){return u.get("/books/category",{params:{category:t}}).then(e=>e.data)}function H(t){return u.get(`/books/${t}`).then(e=>e.data)}const r={ulCategoryContainer:document.querySelector("#listContainer"),gallery:document.querySelector(".js-gallery"),btnAllCategories:document.querySelector('button[data-category="All categories"]'),modalWrapper:document.querySelector(".js-modal-wrapper"),modalImg:document.querySelector(".js-modal-img"),modalTitle:document.querySelector(".js-modal-title"),modalDescription:document.querySelector(".js-modal-description"),modalText:document.querySelector(".js-modal-text"),modalLinks:document.querySelector(".js-modal-links-icon"),modalBtn:document.querySelector(".js-modal-btn"),modalCongratulation:document.querySelector(".js-modal-congratulation"),modalClose:document.querySelector(".js-icon-close")},{categoryName:U}=c;function W({list_name:t}){return`<li class="item-category"> <button class="${i(U)===t?"active":""}" type="button" data-category="${t}">${t}</button></li>`}async function R(){try{const e=(await q()).map(W).join("");r.ulCategoryContainer.insertAdjacentHTML("beforeend",e)}catch(t){console.error("Error rendering Category list",t)}}R();function V(t){const o=t.split(" ");let a="",n=0;for(const l of o){const s=l.length;if(n+s+1>20){a+="...";break}a+=l+" ",n+=s+1}return a.trim()}function L(t){const{_id:e,book_image:o,title:a,author:n}=t;return`
<li class="books-item" data-id=${e}>
<div class="book-wrapper">
 <img class="book-image" src="${o}" alt="${n} ${a}" />
          <p class="book-image-message-text">QUICK VIEW</p>
</div>
        <h2 class="book-title">${V(a)}</h2>
        <p class="book-author">${n}</p>
</li>     
  `}function h(t){const e=t.split(" "),o=`<span>${e.pop()}</span>`;e.push(o);const a=document.createElement("h1");return a.classList.add("title"),a.innerHTML=e.join(" "),a}function z(t){const e=i(c.booksInCart);return!e||!e.length?!1:e.some(o=>o._id===t)}const y="add",E="remove",T="is-open",p="hidden",v="add to shopping list",B="remove from the shopping list",{modalWrapper:P,modalImg:X,modalTitle:G,modalDescription:K,modalText:Q,modalLinks:Y,modalBtn:g,modalCongratulation:J}=r;async function Z(t){document.body.style.overflow="hidden";const e=await H(t);if(!e){document.body.style.overflow="";return}d(c.categoryOpenInModal,e);const{_id:o,book_image:a,description:n,author:l,title:s,buy_links:M}=e,m=z(o);Y.innerHTML=I(M),G.textContent=s,K.textContent=l,Q.textContent=n,X.src=a,g.textContent=m?B:v,g.dataset.id=o,g.setAttribute("data-type",m?E:y),P.classList.add(T),m&&J.classList.remove(p)}function S(t){if(t.target===t.currentTarget)return;const e=t.target.dataset.id||t.target.closest("li[data-id]").dataset.id;Z(e)}async function C(t){r.gallery.innerHTML="";try{const e=await D(t),o=h(t);r.gallery.appendChild(o);const a=document.createElement("ul");a.classList.add("selected-category-list"),r.gallery.appendChild(a);const n=e.map(l=>L(l)).join("");a.innerHTML=n,a.addEventListener("click",S)}catch{f("Error rendering category. Please try again later.")}}function w(){document.querySelectorAll("button[data-category]").forEach(e=>e.classList.remove("active"))}function tt(t){const e=t.target.dataset.category,o=document.querySelector(`.item-category button[data-category="${e}"]`);w(),o.classList.add("active"),d(c.categoryName,e),C(e)}function et({list_name:t,books:e}){const o=document.createElement("li");o.classList.add("category-books-item");const a=document.createElement("h3");a.classList.add("category-title"),a.textContent=t;const n=document.createElement("ul");n.classList.add("category-list"),n.innerHTML=e.map(L).join(""),n.addEventListener("click",S);const l=document.createElement("div");l.classList.add("category-div");const s=document.createElement("button");return s.classList.add("category-button"),s.setAttribute("type","button"),s.setAttribute("data-category",t),s.textContent="SEE MORE",s.addEventListener("click",tt),o.append(a),o.append(n),o.append(l),l.append(s),o}async function A(){const t=await _();r.gallery.innerHTML="";const e=t.map(et),o=document.createElement("ul");o.classList.add("category-books-list"),o.append(...e),r.gallery.append(h("Best Sellers Books")),r.gallery.append(o)}const{categoryName:ot}=c;function at(t){if(t.target.nodeName!=="BUTTON")return;w(),t.target.classList.add("active");const e=t.target.getAttribute("data-category");d(ot,e),e==="All categories"?A():C(e)}function nt(t){let e=i(c.booksInCart);if(e===null)return;const o=e.filter(a=>a._id!==t);d(c.booksInCart,o),console.log(`The book with id ${t} was remove from cart`)}function rt(t){let e=i(c.booksInCart);if(e===null)e=[t];else if(e.some(a=>a._id===t._id)){console.log("This book already exists in your Cart!");return}else e.push(t);d(c.booksInCart,e),F("The book was successfully written to Cart!")}function st(t){const{type:e,id:o}=t.target.dataset;e===y?(rt(i(c.categoryOpenInModal)),t.target.setAttribute("data-type",E),t.target.textContent=B,r.modalCongratulation.classList.remove(p)):(nt(o),t.target.setAttribute("data-type",y),t.target.textContent=v,r.modalCongratulation.classList.add(p))}function x(t){t.target===t.currentTarget&&(document.body.style.overflow="",r.modalWrapper.classList.remove(T))}const{categoryName:ct}=c,{btnAllCategories:lt}=r;function it(){const t=i(ct);t===null||t==="All categories"?(lt.classList.add("active"),A()):C(t)}const{ulCategoryContainer:dt,modalBtn:ut,modalClose:mt,modalWrapper:gt}=r;document.addEventListener("DOMContentLoaded",it);dt.addEventListener("click",at);ut.addEventListener("click",st);mt.addEventListener("click",x);gt.addEventListener("click",x);
//# sourceMappingURL=commonHelpers.js.map
