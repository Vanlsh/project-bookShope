import{s as l,r as d}from"./assets/localStorageAPI-23a6861f.js";import{i as L,a as k}from"./assets/vendor-8cce9181.js";const f={titleColor:"#FFFFFF",messageColor:"#FFFFFF",messageSize:"20px",position:"topRight",displayMode:"replace",closeOnEscape:!0,pauseOnHover:!1,maxWidth:432,messageSize:"20px",messageLineHeight:"24px"};function g(t){L.show({message:t,backgroundColor:"#EF4040",progressBarColor:"#FFE0AC",...f})}const C="https://books-backend.p.goit.global",h=1e3*30,i=k.create({baseURL:C,timeout:h});function E(t){return g(t.message),null}i.interceptors.response.use(t=>t,E);function T(){return i.get("/books/category-list").then(t=>t.data)}function S(){return i.get("/books/top-books").then(t=>t.data)}function F(t){return i.get("/books/category",{params:{category:t}}).then(e=>e.data)}const c={ulCategoryContainer:document.querySelector("#listContainer"),gallery:document.querySelector(".js-gallery")};function v({list_name:t}){return`<li class="item-category"> <button type="button" data-category="${t}">${t}</button></li>`}async function B(){try{const e=(await T()).map(v).join("");c.ulCategoryContainer.insertAdjacentHTML("beforeend",e)}catch(t){console.error("Error rendering Category list",t)}}B();function x(t){const o=t.split(" ");let a="",r=0;for(const s of o){const n=s.length;if(r+n+1>20){a+="...";break}a+=s+" ",r+=n+1}return a.trim()}function u(t){const{_id:e,book_image:o,title:a,author:r}=t;return`
<li class="books-item" data-id=${e}>
<div class="book-wrapper">
 <img class="book-image" src="${o}" alt="${r} ${a}" />
          <p class="book-image-message-text">QUICK VIEW</p>
</div>
        <h2 class="book-title">${x(a)}</h2>
        <p class="book-author">${r}</p>
</li>     
  `}function p(t){const e=t.split(" "),o=`<span>${e.pop()}</span>`;e.push(o);const a=document.createElement("h1");return a.classList.add("title"),a.innerHTML=e.join(" "),a}function m(t){if(t.target===t.currentTarget)return;const e=t.target.dataset.id||t.target.closest("li[data-id]").dataset.id;console.log(e)}async function y(t){c.gallery.innerHTML="";try{const e=await F(t),o=p(t);c.gallery.appendChild(o);const a=document.createElement("ul");a.classList.add("selected-category-list"),c.gallery.appendChild(a);const r=e.map(s=>u(s)).join("");a.innerHTML=r,a.addEventListener("click",m)}catch{g("Error rendering category. Please try again later.")}}function b(){document.querySelectorAll("button[data-category]").forEach(e=>e.classList.remove("active"))}function M(t){const e=t.target.dataset.category,o=document.querySelector(`.item-category button[data-category="${e}"]`);b(),o.classList.add("active"),l(d.categoryName,e),y(e)}function N({list_name:t,books:e}){const o=document.createElement("li");o.classList.add("category-books-item");const a=document.createElement("h3");a.classList.add("category-title"),a.textContent=t;const r=document.createElement("ul");r.classList.add("category-list"),r.innerHTML=e.map(u).join(""),r.addEventListener("click",m);const s=document.createElement("div");s.classList.add("category-div");const n=document.createElement("button");return n.classList.add("category-button"),n.setAttribute("type","button"),n.setAttribute("data-category",t),n.textContent="SEE MORE",n.addEventListener("click",M),o.append(a),o.append(r),o.append(s),s.append(n),o}async function A(){const t=await S();c.gallery.innerHTML="";const e=t.map(N),o=document.createElement("ul");o.classList.add("category-books-list"),o.append(...e),c.gallery.append(p("Best Sellers Books")),c.gallery.append(o)}const{categoryName:$}=d;function w(t){if(t.target.nodeName!=="BUTTON")return;b(),t.target.classList.add("active");const e=t.target.getAttribute("data-category");l($,e),e==="All categories"?A():y(e)}const{ulCategoryContainer:H}=c;H.addEventListener("click",w);
//# sourceMappingURL=commonHelpers.js.map
